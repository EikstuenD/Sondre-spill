<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<title>CodeRacer 3D – First Person</title>
<style>

    body { margin: 0; overflow: hidden; background: black; }

    #info {

      position: absolute;

      top: 10px;

      width: 100%;

      color: white;

      text-align: center;

      font-family: Arial;

    }
</style>
</head>
<body>
<div id="info">WASD = kjør | Mus = se rundt</div>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>

  // SCENE

  const scene = new THREE.Scene();

  scene.background = new THREE.Color(0x87ceeb);

  // KAMERA (FIRST PERSON)

  const camera = new THREE.PerspectiveCamera(

    75,

    window.innerWidth / window.innerHeight,

    0.1,

    1000

  );

  // RENDERER

  const renderer = new THREE.WebGLRenderer({ antialias: true });

  renderer.setSize(window.innerWidth, window.innerHeight);

  document.body.appendChild(renderer.domElement);

  // LYS

  scene.add(new THREE.AmbientLight(0xffffff, 0.6));

  const sun = new THREE.DirectionalLight(0xffffff, 0.6);

  sun.position.set(50, 100, 50);

  scene.add(sun);

  // BAKKE

  const ground = new THREE.Mesh(

    new THREE.PlaneGeometry(500, 500),

    new THREE.MeshStandardMaterial({ color: 0x2c7a3f })

  );

  ground.rotation.x = -Math.PI / 2;

  scene.add(ground);

  // VEI

  const road = new THREE.Mesh(

    new THREE.BoxGeometry(20, 0.1, 500),

    new THREE.MeshStandardMaterial({ color: 0x333333 })

  );

  road.position.y = 0.05;

  scene.add(road);

  // BY (ENKLE BYGNINGER)

  for (let i = 0; i < 50; i++) {

    const building = new THREE.Mesh(

      new THREE.BoxGeometry(10, Math.random() * 40 + 10, 10),

      new THREE.MeshStandardMaterial({ color: 0x777777 })

    );

    building.position.set(

      Math.random() * 200 - 100,

      building.geometry.parameters.height / 2,

      Math.random() * 200 - 100

    );

    scene.add(building);

  }

  // BIL (erstattes med BMW-modell senere)

  const car = new THREE.Mesh(

    new THREE.BoxGeometry(2, 1, 4),

    new THREE.MeshStandardMaterial({ color: 0x0055ff })

  );

  car.position.y = 0.5;

  scene.add(car);

  // KONTROLLER

  const keys = {};

  window.addEventListener("keydown", e => keys[e.key] = true);

  window.addEventListener("keyup", e => keys[e.key] = false);

  let speed = 0;

  function animate() {

    requestAnimationFrame(animate);

    if (keys["w"]) speed += 0.01;

    if (keys["s"]) speed -= 0.01;

    speed *= 0.98;

    if (keys["a"]) car.rotation.y += 0.03;

    if (keys["d"]) car.rotation.y -= 0.03;

    car.translateZ(speed);

    // FIRST PERSON KAMERA

    camera.position.copy(car.position);

    camera.position.y += 1;

    camera.rotation.copy(car.rotation);

    renderer.render(scene, camera);

  }

  animate();
</script>
</body>
</html>
 
