<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<title>CodeRacer Open World</title>
<style>

    body {

      margin: 0;

      background: #111;

      color: white;

      font-family: Arial;

      text-align: center;

    }

    canvas {

      background: #2c7a3f; /* gress */

      display: block;

      margin: auto;

      border: 3px solid #555;

    }

    h1 {

      margin: 10px;

    }
</style>
</head>
<body>
<h1>üèéÔ∏è CodeRacer ‚Äì Open World</h1>
<p>WASD / Piltaster for √• kj√∏re</p>
<canvas id="game" width="800" height="500"></canvas>
<script>

  const canvas = document.getElementById("game");

  const ctx = canvas.getContext("2d");

  // VERDEN

  const world = {

    width: 2000,

    height: 2000

  };

  // BIL

  const car = {

    x: 1000,

    y: 1000,

    angle: 0,

    speed: 0,

    maxSpeed: 6,

    accel: 0.2,

    turnSpeed: 0.05

  };

  const keys = {};

  window.addEventListener("keydown", e => keys[e.key] = true);

  window.addEventListener("keyup", e => keys[e.key] = false);

  function update() {

    // GASS / BREMS

    if (keys["ArrowUp"] || keys["w"]) car.speed += car.accel;

    if (keys["ArrowDown"] || keys["s"]) car.speed -= car.accel;

    car.speed *= 0.98; // friksjon

    car.speed = Math.max(Math.min(car.speed, car.maxSpeed), -car.maxSpeed / 2);

    // SVING

    if (keys["ArrowLeft"] || keys["a"]) car.angle -= car.turnSpeed;

    if (keys["ArrowRight"] || keys["d"]) car.angle += car.turnSpeed;

    // BEVEGELSE

    car.x += Math.cos(car.angle) * car.speed;

    car.y += Math.sin(car.angle) * car.speed;

    draw();

    requestAnimationFrame(update);

  }

  function draw() {

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // KAMERA

    const camX = car.x - canvas.width / 2;

    const camY = car.y - canvas.height / 2;

    // VEI (Forza-ish)

    ctx.fillStyle = "#555";

    ctx.fillRect(800 - camX, 0 - camY, 400, world.height);

    // BIL

    ctx.save();

    ctx.translate(car.x - camX, car.y - camY);

    ctx.rotate(car.angle);

    ctx.fillStyle = "red";

    ctx.fillRect(-10, -5, 20, 10);

    ctx.restore();

  }

  update();
</script>
</body>
</html>
 
